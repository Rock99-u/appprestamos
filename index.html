<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro de Préstamos</title>
  <!-- SDK de Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
</head>
<body>
  <h2>Formulario de Préstamos</h2>
  <form id="loanForm">
    <label>Nombre:</label><br>
    <input type="text" id="nombre"><br><br>
    <label>Monto (Gs):</label><br>
    <input type="number" id="monto"><br><br>
    <label>Plazo (días):</label><br>
    <input type="number" id="plazo"><br><br>
    <button type="submit">Registrar Préstamo</button>
  </form>

  <script>
    // Configuración Firebase (tu config real)
    const firebaseConfig = {
      apiKey: "AIzaSyBjiS_ufHJ_QPwb1IrBiWake2yTKy7AxM0",
      authDomain: "ultracreditos-eae1a.firebaseapp.com",
      databaseURL: "https://ultracreditos-eae1a-default-rtdb.firebaseio.com",
      projectId: "ultracreditos-eae1a",
      storageBucket: "ultracreditos-eae1a.appspot.com",
      messagingSenderId: "860734814765",
      appId: "1:860734814765:web:0a8fc3d00b0d76eaeb16a4"
    };

    // Inicializar Firebase (compat)
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Manejar formulario
    const form = document.getElementById("loanForm");
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const nombre = document.getElementById("nombre").value.trim();
      const monto = parseInt(document.getElementById("monto").value);
      const plazo = parseInt(document.getElementById("plazo").value);

      if (!nombre || isNaN(monto) || isNaN(plazo)) {
        alert("Completa todos los campos correctamente.");
        return;
      }

      const nuevoPrestamo = {
        nombre,
        monto,
        plazo,
        fecha: new Date().toISOString(),
        estado: "Activo"
      };

      db.ref("prestamos").push(nuevoPrestamo)
        .then(() => {
          alert("✅ Préstamo registrado exitosamente.");
          form.reset();
        })
        .catch((err) => alert("❌ Error: " + err.message));
    });
  </script>
</body>
</html>
